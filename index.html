<!DOCTYPE html>
<html>
<head>
	<meta charset = "utf-8">
	<title>ADD_ON System</title>

	<link rel="stylesheet" type="text/css" href="css/style.css">
	<script type="text/javascript" src = "js/jquery-1.3.2.min.js"></script>
	<script type="text/javascript" src = "js/jcanvas.min.js"></script>
	<script type="text/javascript" src = "js/jquery.easing.1.3.js"></script>
	<script type="text/javascript" src = "js/sim.js"></script>
	<script type="text/javascript" src = "js/map.js"></script>
	<script type="text/javascript" src = "js/view.js"></script>
	<script type="text/javascript" src = "js/astar.js"></script>
	<script type="text/javascript">

		$(document).ready(function() {
			var View = viewMapForm;
			var Map = map;
			
			View.viewInit();
			//View 

					
			$("#btnSubmit").click(function(){
				var row, col, xPos, yPos, xFinish, yFinish, hazard = [], colorblob = [];
				
				View.clearHazardColorBlob();
				$("#canvas1").clearCanvas();
				// 맵과 각종 오브젝트를 지운다.

				row = $("#row").val();
				col = $("#col").val();

				xPos = $("#xPos").val();
				yPos = $("#yPos").val();

				xFinish = $("#finishX").val();
				yFinish = $("#finishY").val();

				//Form에서 값을 가져온다.

				View.drawBoard(row,col);
				Map.mapInit(row, col);

				//Board 그리기

				hazard = map.createHazard();
				colorblob = map.createColorBlob();
				Map.createFinish(xFinish, yFinish);
				SIM.SIMInit(xPos, yPos);
				Map.createSIM(xPos, yPos);
				
				//오브젝트 그리기

				
				Map.handleMapData();
				//맵 정보 등록하기

				
				var graph = new Graph(map.mapContent);
				var start = graph.grid[xPos][yPos];
				var end = graph.grid[xFinish][yFinish];
				var result = astar.search(graph, start, end);
				

				//var result = SIM.planningPath();

				SIM.followingGivenPath(start, result);
				return false;
			});

		});



	</script>
</head>
<body>

  <div id="main">
    <div id="header">
	  <div id="banner">
	    <div id="welcome">
	      <h1>2015 Software Engineering</h1>
	    </div>
	    <div id="welcome_slogan">
	      <h1>작업중입니다.</h1>
	    </div>
	  </div>
    </div>

	<div id="menubar">
      <ul id="menu">
        <li class="current"><a href="#">실행화면</a></li>

      </ul>
    </div>	
    
	<div id="site_content">		

		<canvas id="canvas1" width="1024" height="768"></canvas>
          </div>
  
  </div>
  
  <div id="footer">
	  <a href="#">20119200xx 박윤하</a> | <a href="#">20119200xx 예준형</a> | <a href="#">2011920049 장호동</a> | <a href="#">위 프로그램의 저작권은 3명에게 있습니다.</a>
  </div>  

	
	<div id = "formBoard">
		<form>
			<p>맵 크기</p>
			행 : <input type = "number" value = "1" id = "row" name = "row" min = "1" max = "9"><br>
			열 : <input type = "number" value = "1" id = "col" name = "col" min = "1" max = "9"><br>
			<p>로봇 추가</p>

			X : <input type = "number" value = "1" id = "xPos" name = "xPos" min = "1" max = "9"><br>
			Y : <input type = "number" value = "1" id = "yPos" name = "yPos" min = "1" max = "9"><br>

			<p>Hazard <img src = "images/insertButton.png" class = "hazardInsert" width = "10" height = "10"></p>
			<div class = "hazardInsertList">
				좌표  : <input type = "text" name = "hazard1" class = "hazard"><br>
			</div>
			<p>ColorBlob <img src = "images/insertButton.png" class = "colorBlobInsert" width = "10" height = "10"></p>
			<div class = "colorBlobInsertList">
				좌표  : <input type = "text" name = "colorblob1" class = "colorblob"><br>
			</div>
			<div class = "finish">
				<p>도착점</p>
				X : <input type = "number" value = "1" id = "finishX" name = "row" min = "1" max = "9"><br>
				Y : <input type = "number" value = "1" id = "finishY" name = "col" min = "1" max = "9"><br>
			</div>
			<p><input type = "submit" id = "btnSubmit" value = "입력"></p>
		</form>
	</div>
</body>
</html>